<!DOCTYPE html>
<html>
<head>
    <title>Doodle Jump</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #87CEEB;
        }
        #gameOver {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
        }
        #score {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            font-family: Arial, sans-serif;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="score">Score: 0</div>
    <div id="gameOver">
        <h1>Game Over!</h1>
        <p>Final Score: <span id="finalScore">0</span></p>
        <button onclick="startGame()">Play Again</button>
    </div>
    <canvas id="gameCanvas"></canvas>


<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreElement = document.getElementById('score');
const gameOverDiv = document.getElementById('gameOver');
const finalScoreSpan = document.getElementById('finalScore');


// Game variables
let doodle = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    size: 30,
    velocityY: 0,
    jumpStrength: -15
};


let platforms = [];
let score = 0;
let gameWidth = 300;
let gameHeight = 500;
let isGameOver = false;
let tiltSensitivity = 0.1;


// Initialize canvas
function initCanvas() {
    canvas.width = gameWidth;
    canvas.height = gameHeight;
}


// Create initial platforms
function generatePlatforms() {
    platforms = [];
    for (let i = 0; i < 15; i++) {
        platforms.push({
            x: Math.random() * (gameWidth - 80) + 40,
            y: gameHeight - (i * (gameHeight / 15)),
            width: 80,
            height: 20,
            color: '#' + Math.floor(Math.random()*16777215).toString(16)
        });
    }
}


// Game loop
function update() {
    if (isGameOver) return;


    // Apply gravity
    doodle.velocityY += 0.5;
    doodle.y += doodle.velocityY;


    // Screen wrap
    if (doodle.x < 0) doodle.x = gameWidth;
    if (doodle.x > gameWidth) doodle.x = 0;


    // Platform collision
    platforms.forEach(platform => {
        if (checkCollision(doodle, platform)) {
            doodle.velocityY = doodle.jumpStrength;
        }
    });


    // Generate new platforms when reaching top
    if (doodle.y < gameHeight / 2) {
        doodle.y += Math.abs(doodle.jumpStrength);
        platforms.forEach(platform => {
            platform.y += Math.abs(doodle.jumpStrength);
        });
        generateNewPlatforms(5);
    }


    // Game over check
    if (doodle.y > gameHeight + doodle.size) {
        gameOver();
    }


    // Update score
    score = Math.floor(gameHeight - doodle.y);
    scoreElement.textContent = `Score: ${score}`;


    requestAnimationFrame(update);
    draw();
}


// Generate new platforms at the top
function generateNewPlatforms(count) {
    for (let i = 0; i < count; i++) {
        platforms.unshift({
            x: Math.random() * (gameWidth - 80) + 40,
            y: platforms[0].y - (gameHeight / 15),
            width: 80,
            height: 20,
            color: '#' + Math.floor(Math.random()*16777215).toString(16)
        });
        platforms.pop();
    }
}


// Collision detection
function checkCollision(doodle, platform) {
    return doodle.x < platform.x + platform.width &&
           doodle.x + doodle.size > platform.x &&
           doodle.y + doodle.size > platform.y &&
           doodle.y < platform.y + platform.height;
}


// Drawing function
function draw() {
    ctx.clearRect(0, 0, gameWidth, gameHeight);


    // Draw platforms
    platforms.forEach(platform => {
        ctx.fillStyle = platform.color;
        ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
    });


    // Draw doodle
    ctx.fillStyle = '#ff4444';
    ctx.fillRect(doodle.x, doodle.y, doodle.size, doodle.size);
}


// Game over handler
function gameOver() {
    isGameOver = true;
    finalScoreSpan.textContent = score;
    gameOverDiv.style.display = 'block';
}


// Tilt controls
window.addEventListener('deviceorientation', (event) => {
    if (event.gamma) {
        doodle.x += event.gamma * tiltSensitivity;
    }
});


// Touch controls fallback
canvas.addEventListener('touchstart', () => {
    if (!isGameOver) {
        doodle.velocityY = doodle.jumpStrength;
    }
});


// Start game
function startGame() {
    gameOverDiv.style.display = 'none';
    doodle = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        size: 30,
        velocityY: 0,
        jumpStrength: -15
    };
    score = 0;
    isGameOver = false;
    generatePlatforms();
    update();
}


// Initial setup
window.addEventListener('load', () => {
    initCanvas();
    startGame();
});
</script>
</body>
</html>
